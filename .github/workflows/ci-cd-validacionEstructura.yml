name: Validacion de Estructura

on:
  workflow_dispatch:
  pull_request:

jobs:
  validate:
    runs-on: ubuntu-latest
    
    steps:
    - name: Descargar codigo
      uses: actions/checkout@v4
      
    - name: Validar estructura del proyecto
      run: |
        echo "Verificando estructura del proyecto..."
        if [ ! -d "scripts/bioprint/src/main/java/grupo1" ]; then
          echo "Directorio scripts/bioprint/src/main/java/grupo1 no encontrado"; exit 1;
        fi
        if [ ! -f "scripts/bioprint/src/main/java/grupo1/Main.java" ]; then
          echo "Clase Main no encontrada"; exit 1;
        fi
        if [ ! -f "scripts/bioprint/src/main/java/grupo1/FuenteHuella.java" ]; then
          echo "Interfaz FuenteHuella no encontrada"; exit 1;
        fi
        echo "Estructura v√°lida"

    - name: Verificar compilacion con javac
      run: |
        mkdir -p target/classes
        javac -d target/classes scripts/bioprint/src/main/java/grupo1/*.java
        echo "Compilacion exitosa"
      
    - name: Comprobar archivos compilados
      run: |
        echo "Verificando clases compiladas..."
        [ -d "target/classes/grupo1" ] && echo "Clases compiladas encontradas" || echo "No hay clases compiladas"
        ls target/classes/grupo1/*.class | wc -l | xargs echo "Numero de archivos class:"

