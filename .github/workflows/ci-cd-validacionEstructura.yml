name: Validacion de Estructura

on:
  workflow_dispatch:
  pull_request:

jobs:
  validate:
    runs-on: ubuntu-latest
    
    steps:
    - name: Descargar codigo
      uses: actions/checkout@v4
      
    - name: Validar estructura del proyecto
      run: |
        echo "Verificando estructura del proyecto..."
        [ -d "src/main/java/grupo1" ] && echo "Directorio de fuente encontrado" || echo "Directorio de fuente no encontrado"
        [ -f "src/main/java/grupo1/Main.java" ] && echo "Clase Main encontrada" || echo "Clase Main no encontrado"
        [ -f "src/main/java/grupo1/FuenteHuella.java" ] && echo "Interfaz FuenteHuella encontrada" || echo "Interfaz FuenteHuella no encontrado"
        
    - name: Verificar compilacion con javac
      run: |
        mkdir -p target/classes
        javac -d target/classes src/main/java/grupo1/*.java
        echo "Compilacion exitosa"
      
    - name: Comprobar archivos compilados
      run: |
        echo "Verificando clases compiladas..."
        [ -d "target/classes/grupo1" ] && echo "Clases compiladas encontradas" || echo "No hay clases compiladas"
        ls target/classes/grupo1/*.class | wc -l | xargs echo "Numero de archivos class:"
